<base:BaseView x:Class="FTSolutions.IEC61034.Runner.MainUI"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
               xmlns:ini="clr-namespace:FTSolutions.IEC61034.Common.Setting;assembly=FTSolutions.IEC61034.Common"
               xmlns:base="clr-namespace:eccFramework.SharedLib.Core.Base;assembly=eccFramework.SharedLib.Core"
               xmlns:lego="clr-namespace:eccFramework.SharedLib.Lego.Brick;assembly=eccFramework.SharedLib.Lego"
               xmlns:conv="clr-namespace:FTSolutions.IEC61034.Common.Converter;assembly=FTSolutions.IEC61034.Common"
               Background="#2D2D30" FontFamily="Nanum Gothic">
    <base:BaseView.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/eccFramework.SharedLib.Core;component/Styles/PopupBrushes.xaml"/>
                <ResourceDictionary Source="/FTSolutions.IEC61034.Runner;component/Styles/IEC61034Brushes.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <conv:ReverseBooleanConverter x:Key="reverseBooleanConverter" />

            <Style TargetType="lego:BulletPushButton">
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Center" />
                <Setter Property="FontSize" Value="12" />
                <Setter Property="Width" Value="45" />
                <Setter Property="Height" Value="45" />
                <Setter Property="Margin" Value="2,1" />
            </Style>

            <Style TargetType="lego:eccTextBlock">
                <Setter Property="FontSize" Value="15" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Left" />
                <Setter Property="Margin" Value="3" />
                <Setter Property="FontWeight" Value="Bold" />
            </Style>

            <LinearGradientBrush x:Key="borderStyle" StartPoint="0,0" EndPoint="1,1">
                <GradientStop Offset="0.4" Color="#FF9C9C9C"/>
                <GradientStop Offset="0.6" Color="#CC7A7A7A"/>
                <GradientStop Offset="1" Color="#FF6C6C6C"/>
            </LinearGradientBrush>

            <Style x:Key="styleMainTitle" TargetType="lego:eccTextBlock">
                <Setter Property="FontSize" Value="38" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Left" />
                <Setter Property="Margin" Value="3" />
                <Setter Property="Foreground" Value="{StaticResource state_action_color}" />
                <Setter Property="FontWeight" Value="Bold" />
            </Style>

            <Style x:Key="regInfoValueStyle" TargetType="lego:eccTextBox">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Stretch" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="Height" Value="28" />
                <Setter Property="Margin" Value="1" />
                <Setter Property="IsReadOnly" Value="True" />
                <Setter Property="BorderBrush" Value="{StaticResource state_none_color}" />
                <Setter Property="Foreground" Value="{StaticResource popup_textbox_fg}" />
            </Style>

            <Style x:Key="styleDigitalPanel" TargetType="StackPanel">
                <Setter Property="Orientation" Value="Horizontal" />
                <Setter Property="HorizontalAlignment" Value="Center" />
                <Setter Property="IsEnabled" Value="False" />
                <Setter Property="Opacity" Value="0.5" />
            </Style>
        </ResourceDictionary>
    </base:BaseView.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="310"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="80"/>
                <RowDefinition Height="100"/>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border Grid.Row="0" BorderThickness="1" BorderBrush="{StaticResource popup_header_bb}" Background="{StaticResource popup_background}">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Left" Orientation="Horizontal">
                        
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <lego:eccTextBlock Text="{DynamicResource main_header}" Style="{StaticResource styleMainTitle}" />
                    </StackPanel>
                </DockPanel>
            </Border>

            <Border Grid.Row="1" BorderThickness="1" BorderBrush="{StaticResource popup_header_bb}" Background="{StaticResource popup_header_bg}">
                <StackPanel Orientation="Horizontal">
                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_light}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_on}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsLightOn, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_off}" BorderBrush="{StaticResource state_invalid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsLightOff, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>
                    
                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_ignitor}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_on}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsIgnitorOn, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_off}" BorderBrush="{StaticResource state_invalid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsIgnitorOff, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>                    

                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_fan}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_on}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsFanOn, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_off}" BorderBrush="{StaticResource state_invalid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsFanOff, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>
                    
                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_in_damper}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_on}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsInDamperOpen, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_off}" BorderBrush="{StaticResource state_invalid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsInDamperClose, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>

                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_out_damper}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_on}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsOutDamperOpen, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_off}" BorderBrush="{StaticResource state_invalid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsOutDamperClose, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>

                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_lamp}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_on}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsLampOn, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_off}" BorderBrush="{StaticResource state_invalid_color}"
                                                   IsChecked="{Binding SESSION_MANAGER.IsLampOff, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>

                    <lego:eccGroupBox Tag="15" Header="{DynamicResource main_nd_filter}" Margin="4" VerticalAlignment="Center"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <StackPanel Style="{StaticResource styleDigitalPanel}">
                            <lego:BulletPushButton Content="{DynamicResource key_clear}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsClearFilterOn, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_nd_filter01}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsNDFilter01On, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_nd_filter02}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsNDFilter02On, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_nd_filter03}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsNDFilter03On, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_nd_filter05}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsNDFilter05On, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_nd_filter07}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsNDFilter07On, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_nd_filter10}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsNDFilter10On, Mode=OneWay}" />
                            <lego:BulletPushButton Content="{DynamicResource key_dark}" BorderBrush="{StaticResource state_valid_color}"
                                                   IsChecked="{Binding DEVICE_MANAGER.DigitalInput.IsDarkFilterOn, Mode=OneWay}" />
                        </StackPanel>
                    </lego:eccGroupBox>
                </StackPanel>
            </Border>

            <Border Grid.Row="2" Padding="1" Opacity="{Binding SESSION_MANAGER.LayoutOpacity}">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Image Source="/FTSolutions.IEC61034.Runner;component/Images/basic_circuit.png" Stretch="None" Margin="20" />
                </StackPanel>
            </Border>
        </Grid>

        <Grid Grid.Column="1">
            <Border Margin="3" BorderThickness="1" BorderBrush="Gray" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <StackPanel Orientation="Vertical" Background="{StaticResource popup_background}">
                    <lego:eccGroupBox Tag="13" Header="{DynamicResource key_registration_info}" Margin="3,5,3,10" VerticalAlignment="Stretch"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <Grid DockPanel.Dock="Top" >
                            <Grid.RowDefinitions>
                                <lego:CollapsibleRowDefinition Height="1*"
                                                               Collapsed="{Binding Source={x:Static ini:IniConfig.IsAllowCustNo}, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"></lego:CollapsibleRowDefinition>
                                <lego:CollapsibleRowDefinition Height="1*"
                                                               Collapsed="{Binding Source={x:Static ini:IniConfig.IsAllowCustNo}, Converter={StaticResource reverseBooleanConverter}, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"></lego:CollapsibleRowDefinition>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="105"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <lego:eccTextBlock Grid.Row="0" Grid.Column="0" Text="{DynamicResource key_reg_no}" />
                            <lego:eccTextBox Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource regInfoValueStyle}"
                                             Text="{Binding SESSION_MANAGER.IEC61034_DataSetTest.RegistrationInfo.REG_NO}" />

                            <lego:eccTextBlock Grid.Row="1" Grid.Column="0" Text="{DynamicResource key_cust_no}" />
                            <lego:eccTextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2" Style="{StaticResource regInfoValueStyle}"
                                             Text="{Binding SESSION_MANAGER.IEC61034_DataSetTest.RegistrationInfo.CUST_NO}" />

                            <lego:eccTextBlock Grid.Row="2" Grid.Column="0" Text="{DynamicResource key_customer}" />
                            <lego:eccTextBox Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource regInfoValueStyle}"
                                             Text="{Binding SESSION_MANAGER.IEC61034_DataSetTest.RegistrationInfo.SPONSOR_NAME}" />

                            <lego:eccTextBlock Grid.Row="4" Grid.Column="0" Text="{DynamicResource key_test_name}" />
                            <lego:eccTextBox Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource regInfoValueStyle}"
                                             Text="{Binding SESSION_MANAGER.IEC61034_DataSetTest.RegistrationInfo.PRODUCT_NAME}" />

                            <lego:eccTextBlock Grid.Row="6" Grid.Column="0" Text="{DynamicResource key_standard}" />
                            <lego:eccTextBox Grid.Row="7" Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource regInfoValueStyle}"
                                             Text="{Binding SESSION_MANAGER.IEC61034_DataSetTest.RegistrationInfo.STANDARD_DESC}" />
                        </Grid>
                    </lego:eccGroupBox>

                    <lego:eccGroupBox Tag="13" Header="{DynamicResource key_information}" Margin="3,5,3,0" VerticalAlignment="Stretch"
                                      BorderBrush="{StaticResource groupbox_header_bg}"
                                      Background="{StaticResource popup_background}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                                <RowDefinition Height="1*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="125"/>
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <lego:eccTextBlock Grid.Row="0" Grid.Column="0" Text="{DynamicResource main_fan_flowrate}" TextWrapping="Wrap"/>
                            <lego:Segment3X2 Grid.Row="0" Grid.Column="1" Value="{Binding CurrentItem_Measurement.FanFlowrate}" Width="150" Margin="3"
                                             StateBrush="{StaticResource state_measure_color}" BorderGradientBrush="{StaticResource borderStyle}"/>

                            <lego:eccTextBlock Grid.Row="1" Grid.Column="0" Text="{DynamicResource main_chamber_tc}" TextWrapping="Wrap"/>
                            <lego:Segment3X2 Grid.Row="1" Grid.Column="1" Value="{Binding CurrentItem_Measurement.ChamberTemperature}" Width="150" Margin="3"
                                             StateBrush="{StaticResource state_measure_color}" BorderGradientBrush="{StaticResource borderStyle}"/>

                            <lego:eccTextBlock Grid.Row="2" Grid.Column="0" Text="{DynamicResource main_transmission}" TextWrapping="Wrap"/>
                            <lego:Segment3X2 Grid.Row="2" Grid.Column="1" Value="{Binding CurrentItem_Measurement.Transmission}" Width="150" Margin="3"
                                             StateBrush="{StaticResource state_measure_color}" BorderGradientBrush="{StaticResource borderStyle}"/>

                            <!--
                            <lego:eccTextBlock Grid.Row="3" Grid.Column="0" Text="{DynamicResource main_absorbance}" TextWrapping="Wrap"/>
                            <lego:Segment3X2 Grid.Row="3" Grid.Column="1" Value="{Binding CurrentItem_Measurement.Absorbance}" Width="150" Margin="3"
                                             StateBrush="{StaticResource state_measure_color}" BorderGradientBrush="{StaticResource borderStyle}"/>     
                            -->
                        </Grid>
                    </lego:eccGroupBox>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</base:BaseView>
