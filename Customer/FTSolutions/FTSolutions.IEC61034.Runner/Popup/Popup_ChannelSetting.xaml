<bw:BaseIEC61034Popup x:Class="FTSolutions.IEC61034.Runner.Popup.Popup_ChannelSetting"
                        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:sys="clr-namespace:System;assembly=mscorlib"
                        xmlns:bw="clr-namespace:FTSolutions.IEC61034.Common.Base;assembly=FTSolutions.IEC61034.Common"
                        xmlns:lego="clr-namespace:eccFramework.SharedLib.Lego.Brick;assembly=eccFramework.SharedLib.Lego"
                        AllowsTransparency="True" WindowStyle="None" ResizeMode="NoResize"
                        WindowStartupLocation="CenterScreen"
                        Title="{DynamicResource main_header}" Height="800" Width="1250">
    <bw:BaseIEC61034Popup.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/eccFramework.SharedLib.Core;component/Styles/PopupBrushes.xaml"/>
                <ResourceDictionary Source="/FTSolutions.IEC61034.Runner;component/Styles/IEC61034Brushes.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <Style TargetType="lego:eccTextBlock">
                <Setter Property="FontSize" Value="13" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Center" />
            </Style>

            <Style x:Key="gridTextBlock" TargetType="lego:eccTextBlock">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Stretch" />
                <Setter Property="Margin" Value="5,0,5,0" />
            </Style>

            <Style x:Key="gridTextBox" TargetType="lego:eccTextBox">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="Height" Value="35" />
                <Setter Property="HorizontalAlignment" Value="Stretch" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalContentAlignment" Value="Left" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="Margin" Value="1,0,1,0" />
            </Style>

            <Style TargetType="lego:eccButton">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="Height" Value="35" />
            </Style>

            <DataTemplate x:Key="ItemTemplateChannelInfo">
                <Grid Height="35">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"></ColumnDefinition>
                        <ColumnDefinition Width="190"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="220"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <lego:eccTextBlock Grid.Column="0" Text="{Binding Path=Channel}" Style="{StaticResource gridTextBlock}"/>
                    <lego:eccTextBox Grid.Column="1" Text="{Binding Path=Address}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="2" Text="{Binding Path=MinVoltage}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="3" Text="{Binding Path=MaxVoltage}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="4" Text="{Binding Path=GradientVoltage}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="5" Text="{Binding Path=InterceptVoltage}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="6" Text="{Binding Path=MinValue}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="7" Text="{Binding Path=MaxValue}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="8" Text="{Binding Path=GradientValue}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="9" Text="{Binding Path=InterceptValue}" Style="{StaticResource gridTextBox}"/>
                    <lego:eccTextBox Grid.Column="10" Text="{Binding Path=Description}" Style="{StaticResource gridTextBox}"/>
                </Grid>
            </DataTemplate>

            <Style x:Key="styleTableLabel" TargetType="lego:eccTextBlock">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="HorizontalAlignment" Value="Center" />
                <Setter Property="Foreground" Value="White" />
            </Style>

            <Style x:Key="styleTableData" TargetType="lego:eccTextBox">
                <Setter Property="Foreground" Value="{StaticResource state_action_color}" />
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontWeight" Value="Bold" />
                <Setter Property="Height" Value="35" />
                <Setter Property="Margin" Value="2" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="HorizontalContentAlignment" Value="Center" />
            </Style>

            <DataTemplate x:Key="ItemTemplateCalibrationData">
                <Grid Height="35">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="40"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="150"/>
                    </Grid.ColumnDefinitions>

                    <lego:eccTextBlock Grid.Column="0" Text="{Binding NO}" Style="{StaticResource styleTableLabel}" />
                    <lego:eccTextBox Grid.Column="1" Text="{Binding APPLIED_VALUE}" Style="{StaticResource styleTableData}" />
                    <lego:eccTextBox Grid.Column="2" Text="{Binding INDICATED_VALUE}" Style="{StaticResource styleTableData}" />
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </bw:BaseIEC61034Popup.Resources>

    <DockPanel Background="{StaticResource popup_background}">
        <!-- HEADER -->
        <Border DockPanel.Dock="Top" Height="85" BorderThickness="1"
                BorderBrush="{StaticResource popup_header_bb}" Background="{StaticResource popup_header_bg}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="140"/>
                    <ColumnDefinition />
                    <ColumnDefinition Width="200"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" BorderThickness="1" Background="White" Margin="5,16">
                    <Image Source="pack://application:,,,/eccFramework.SharedLib.Core;component/Images/ftsolutions_logo.png" 
                           RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="True" Margin="5" HorizontalAlignment="Right" />
                </Border>

                <StackPanel Grid.Column="1" VerticalAlignment="Top" Margin="0,10,0,0">
                    <TextBlock FontSize="20" Text="{DynamicResource popup_channel_setting_title}" Style="{StaticResource headerLabelTitleStyle}" />
                    <TextBlock Text="{DynamicResource popup_channel_setting_desc}" Style="{StaticResource headerLabelContentStyle}" />
                    <TextBlock Text="{DynamicResource popup_common_desc}" Style="{StaticResource headerLabelContentStyle}" Foreground="Yellow" />
                </StackPanel>

                <Border Grid.Column="2" Margin="10" BorderThickness="1" Background="{Binding SESSION_MANAGER.LogoBackground}">
                    <Image Source="{Binding SESSION_MANAGER.ClientLogoPath}" Margin="3" />
                </Border>
            </Grid>
        </Border>
        <!-- FOOTER -->
        <Border DockPanel.Dock="Bottom" Height="70" Padding="0,4,0,0" BorderThickness="1" 
                BorderBrush="{StaticResource popup_footer_bb}" Background="{StaticResource popup_footer_bg}">
            <DockPanel>
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" VerticalAlignment="Center">
                    <ToggleButton x:Name="btnController" Background="Transparent" BorderThickness="0"
                                  Width="60" Margin="10,0,0,0"
                                  Style="{StaticResource SettingToggleButtonStyleKey}"
                                  ContentTemplate="{StaticResource SettingToggleButtonContentTemplateKey}"/>
                    <Popup IsOpen="{Binding ElementName=btnController, Path=IsChecked}"
                           PlacementTarget="{Binding ElementName=btnController}"
                           Placement="Right" StaysOpen="False" AllowsTransparency="True" HorizontalOffset="1" VerticalOffset="-3" >
                        <Border BorderBrush="#cF8c8c8c" BorderThickness="1" Background="#ff000000">
                            <Grid Margin="10" Height="500">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                
                                <Grid Grid.Column="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="40"></RowDefinition>
                                        <RowDefinition Height="*"></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="40"></ColumnDefinition>
                                            <ColumnDefinition Width="150"></ColumnDefinition>
                                            <ColumnDefinition Width="150"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>

                                        <lego:eccTextBlock Grid.Row="0" Grid.Column="0" Text="{DynamicResource key_no}" />
                                        <lego:eccTextBlock Grid.Row="0" Grid.Column="1" Text="{DynamicResource key_applied_value}" />
                                        <lego:eccTextBlock Grid.Row="0" Grid.Column="2" Text="{DynamicResource key_indicated_value}" />
                                    </Grid>

                                    <DockPanel Grid.Row="1" Height="Auto">
                                        <ListBox HorizontalAlignment="Stretch" Background="{StaticResource groupbox_body_bg}"
                                                 ItemsSource="{Binding CalibrationResult.CalibrationDataList}"
                                                 ItemTemplate="{StaticResource ItemTemplateCalibrationData}"/>
                                    </DockPanel>
                                </Grid>
                                <Grid Grid.Column="1" Margin="5" VerticalAlignment="Top">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="70"/>
                                        <RowDefinition Height="45"/>
                                        <RowDefinition Height="45"/>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="110"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>

                                    <lego:FancyButton Grid.Column="0" Grid.ColumnSpan="2" Style="{StaticResource fancyButtonStyle}" Visibility="{Binding CancelVisibility}"
                                                      FuncType="View" Title="{DynamicResource btn_calculate}" SubTitle="{DynamicResource btn_calculate_desc}" Height="60"
                                                      Command="{Binding CalibrationResult.CalculateCalibrationCommand}" />

                                    <lego:eccTextBlock Grid.Row="1" Grid.Column="0" Text="{DynamicResource key_gradient}" Style="{StaticResource headerLabelTitleStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    <lego:eccTextBox Grid.Row="1" Grid.Column="1" Text="{Binding CalibrationResult.Gradient}" Style="{StaticResource styleTableData}" IsReadOnly="True"/>

                                    <lego:eccTextBlock Grid.Row="2" Grid.Column="0" Text="{DynamicResource key_intercept}" Style="{StaticResource headerLabelTitleStyle}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    <lego:eccTextBox Grid.Row="2" Grid.Column="1" Text="{Binding CalibrationResult.Intercept}" Style="{StaticResource styleTableData}" IsReadOnly="True"/>

                                    <StackPanel Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,40,0,0" HorizontalAlignment="Center">
                                        <lego:ActionButton Content="{DynamicResource key_add}" Width="70" Height="70" FontSize="14" Margin="5"
                                                           Command="{Binding CalibrationResult.AddCalibrationCommand}" 
                                                           BorderBrush="{StaticResource state_action_color}"/>

                                        <lego:ActionButton Content="{DynamicResource btn_clear}" Width="70" Height="70" FontSize="14" Margin="5"
                                                           Command="{Binding CalibrationResult.ClearCalibrationCommand}" 
                                                           BorderBrush="{StaticResource state_measure_color}"/>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </Border>
                    </Popup>
                </StackPanel>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <lego:FancyButton Style="{StaticResource fancyButtonStyle}" Visibility="{Binding CancelVisibility}"
                                      FuncType="New" Title="{DynamicResource btn_new}" SubTitle="{DynamicResource btn_new_desc}" Height="60"
                                      Click="New_Click"/>

                    <lego:FancyButton Style="{StaticResource fancyButtonStyle}" Visibility="{Binding CancelVisibility}"
                                      FuncType="Save" Title="{DynamicResource btn_save}" SubTitle="{DynamicResource btn_save_desc}" Height="60"
                                      Command="{Binding SaveCommand}" />

                    <lego:FancyButton Style="{StaticResource fancyButtonStyle}" Visibility="{Binding CancelVisibility}"
                                      FuncType="Cancel" Title="{DynamicResource btn_close}" SubTitle="{DynamicResource btn_close_desc}" Height="60"
                                      Command="{Binding CloseClick}" />
                </StackPanel>
            </DockPanel>
        </Border>
        <!-- BODY -->
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="60"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>

            <Border Grid.Row="0" BorderThickness="1" BorderBrush="{StaticResource popup_footer_bb}" Background="{StaticResource popup_footer_bg}">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <lego:eccButton Content="{DynamicResource popup_channel_setting_copy_clipboard}" Width="200" Height="40" Margin="20,0,10,0"
                                    Command="{Binding CopyToClipboardCommand}"/>
                    <lego:eccButton Content="{DynamicResource popup_channel_setting_load_file}" Width="200" Height="40" Margin="10,0,20,0"
                                    Command="{Binding LoadFileCommand}"/>
                </StackPanel>
            </Border>

            <Grid Grid.Row="1" Height="60">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"></ColumnDefinition>
                    <ColumnDefinition Width="190"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="70"></ColumnDefinition>
                    <ColumnDefinition Width="220"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="0" Text="{DynamicResource key_channel}" />
                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="1" Text="{DynamicResource key_address}" />
                <lego:eccTextBlock Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Text="{DynamicResource key_voltage}" />
                <lego:eccTextBlock Grid.Row="1" Grid.RowSpan="2" Grid.Column="2" Text="{DynamicResource key_min}" />
                <lego:eccTextBlock Grid.Row="1" Grid.RowSpan="2" Grid.Column="3" Text="{DynamicResource key_max}" />
                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" Text="{DynamicResource key_gradient}" />
                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="5" Text="{DynamicResource key_intercept}" />
                <lego:eccTextBlock Grid.Row="0" Grid.Column="6" Grid.ColumnSpan="2" Text="{DynamicResource key_value}" />
                <lego:eccTextBlock Grid.Row="1" Grid.RowSpan="2" Grid.Column="6" Text="{DynamicResource key_min}" />
                <lego:eccTextBlock Grid.Row="1" Grid.RowSpan="2" Grid.Column="7" Text="{DynamicResource key_max}" />
                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="8" Text="{DynamicResource key_gradient}" />
                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="9" Text="{DynamicResource key_intercept}" />
                <lego:eccTextBlock Grid.Row="0" Grid.RowSpan="2" Grid.Column="10" Text="{DynamicResource key_desc}" />
            </Grid>

            <DockPanel Grid.Row="2" Height="Auto">
                <ListBox IsSynchronizedWithCurrentItem="True" Background="{StaticResource popup_footer_bg}"
                         ItemsSource="{Binding SESSION_MANAGER.ChannelSetting}"
                         ItemTemplate="{StaticResource ItemTemplateChannelInfo}"/>
            </DockPanel>
        </Grid>
    </DockPanel>
</bw:BaseIEC61034Popup>
